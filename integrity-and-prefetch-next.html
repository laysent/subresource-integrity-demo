<!DOCTYPE html>
<html>
  <head>
    <meta charset=utf-8>
    <title>Demo Page for Subresource Integrity and Prefetch</title>
    <meta name=description content="demo page for Subresource Integrity (SRI) and Prefetch">
    <meta http-equiv=X-UA-Compatible content="IE=Edge">
    <meta name=viewport content="width=device-width,initial-scale=1.0">
    <meta name=robots content=index,follow>
    <link rel=canonical href=https://laysent.github.io/subresource-integrity-demo/integrity-and-prefetch-next.html />
    <link
      href=./main.css
      rel=stylesheet
      integrity="sha512-mbzzgGIjfEC93ZP2SML7m8+qpNxg4KQH5s28RcwDGfgB8mpa9MbIlSg1GDd6IMeHowT1owpRqNnSJK7Feob12g=="
      crossorigin=anonymous
    />
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-31656866-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-31656866-1');
    </script>
  </head>
  <body>
    <main>
      <h1>Second Page of Subresource Integrity and Prefetch</h1>
      <section>
        <h2>explaination</h2>
        <p>
          This is second page to demo behavior of <em>prefetch</em> and <em>SRI</em> resources.
        </p>
      </section>
      <section>
        <h2>Status of resources loading</h2>
        <ul id=status-bar>
          <li id=style-failed class=failed>Style failed to load</li>
          <li id=style-succeeded class=succeeded>Style loaded successfully</li>
          <li id=script-failed class=failed>Script failed to load</li>
        </ul>
      </section>
      <section>
        <a href=./integrity-and-prefetch.html>Back</a>
      </section>
      <footer>
        Â© 2018 LaySent.
      </footer>
    </main>
    <script>
      var querystring = location.search.substr(1).split('&').reduce((acc, pair) => {
        var parts = pair.split('=');
        acc[parts[0]] = parts[1];
        return acc;
      }, { });
      var link = document.createElement('link');
      link.rel = 'stylesheet';
      link.href = './style.css';
      link.crossOrigin = 'anonymous';
      if (querystring.integrity === 'all' || querystring.integrity === 'style') {
        link.integrity = 'sha512-7z8mwAKsLTdd/Gto8TfFUpcx1F0+HMB2mxZpkthvOs7FAtKzVQiwa7fF48jSv2tk6vYRtgfT3K5l2DOMWrqyRA==';
      }
      document.head.appendChild(link);

      var script = document.createElement('script');
      script.type = 'text/javascript';
      script.src = './script.js';
      script.crossOrigin = 'anonymous';
      if (querystring.integrity === 'all' || querystring.integrity === 'script') {
        script.integrity = 'sha512-zw36VuUy/09iVs2cRYeF80XlEEf0sRRDpBojNYf+3AlG++nhf6UcgWIQXiHKaLkw36VZLqV7nn/OeacCLsjaBA==';
      }
      document.body.appendChild(script);
    </script>
    </script>
  </body>
</html>